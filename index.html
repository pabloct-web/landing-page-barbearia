<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barbearia Estilo & Corte</title>
    <link rel="stylesheet" href="css/style.css">

</head>
<body>
    <header>
        <div class="container">
            <h1>Barbearia Estilo & Corte</h1>
            <nav>
                <ul>
                    <li><a href="#home">Início</a></li>
                    <li><a href="#servicos">Serviços</a></li>
                    <li><a href="#galeria">Galeria</a></li>
                    <li><a href="#equipe">Equipe</a></li>
                    <li><a href="#faq">FAQ</a></li>
                    <li><a href="#sobre">Sobre</a></li>
                    <li><a href="#contato">Contato</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section id="home" class="hero">
        <div class="container">
            <h2>O melhor estilo para o seu dia a dia</h2>
            <p>Profissionais experientes e ambiente climatizado.</p>
            <a href="#contato" class="btn">Agende seu horário</a>
        </div>
    </section>

    <section id="servicos" class="servicos">
        <div class="container">
            <h2 class="section-title">Nossos Serviços</h2>
            <p class="section-subtitle">Qualidade e tradição em cada detalhe</p>
            <div class="cards">
                <div class="card">
                    <h3>Corte de Cabelo</h3>
                    <p>Cortes modernos e clássicos.</p>
                    <span class="price">R$ 40,00</span>
                </div>
                <div class="card">
                    <h3>Barba</h3>
                    <p>Modelagem e hidratação com toalha quente.</p>
                    <span class="price">R$ 30,00</span>
                </div>
                <div class="card">
                    <h3>Combo (Cabelo + Barba)</h3>
                    <p>O pacote completo para o seu visual.</p>
                    <span class="price">R$ 60,00</span>
                </div>
            </div>
        </div>
    </section>

    <section id="galeria" class="galeria">
        <div class="container">
            <h2 class="section-title">Nossa Galeria</h2>
            <p class="section-subtitle">Confira o ambiente e nossos trabalhos recentes</p>
            <div class="gallery-grid">
                <div class="gallery-item"><img src="https://images.unsplash.com/photo-1585747860715-2ba37e788b70?w=600&q=80" alt="Corte 1"></div>
                <div class="gallery-item"><img src="https://images.unsplash.com/photo-1599351431202-1e0f0137899a?w=600&q=80" alt="Barba"></div>
                <div class="gallery-item"><img src="https://images.unsplash.com/photo-1621605815971-fbc98d665033?w=600&q=80" alt="Corte 2"></div>
                <div class="gallery-item"><img src="https://images.unsplash.com/photo-1532710093739-9470acff878f?w=600&q=80" alt="Ferramentas"></div>
                <div class="gallery-item"><img src="https://images.unsplash.com/photo-1622286342621-4bd786c2447c?w=600&q=80" alt="Cliente Satisfeito"></div>
            </div>
        </div>
    </section>

    <section id="equipe" class="equipe">
        <div class="container">
            <h2 class="section-title">Nossos Profissionais</h2>
            <p class="section-subtitle">Escolha o especialista ideal para o seu estilo</p>
            <div id="team-container" class="team-grid">
                <!-- Os profissionais serão carregados aqui via JavaScript -->
                <div class="loading">Carregando equipe...</div>
            </div>
        </div>
    </section>

    <section id="faq" class="faq">
        <div class="container">
            <h2 class="section-title">Perguntas Frequentes</h2>
            <div class="accordion">
                <div class="accordion-item">
                    <div class="accordion-header">Preciso agendar horário?</div>
                    <div class="accordion-content"><p>Sim, recomendamos o agendamento para garantir seu atendimento sem espera.</p></div>
                </div>
                <div class="accordion-item">
                    <div class="accordion-header">Aceitam cartão de crédito?</div>
                    <div class="accordion-content"><p>Aceitamos todos os cartões de crédito, débito e PIX.</p></div>
                </div>
                <div class="accordion-item">
                    <div class="accordion-header">Fazem atendimento infantil?</div>
                    <div class="accordion-content"><p>Sim, temos profissionais especializados em corte infantil com muita paciência e cuidado.</p></div>
                </div>
                <div class="accordion-item">
                    <div class="accordion-header">Existe estacionamento no local?</div>
                    <div class="accordion-content"><p>Sim, possuímos estacionamento gratuito para clientes em frente à barbearia.</p></div>
                </div>
            </div>
        </div>
    </section>

    <section id="sobre" class="sobre">
        <div class="container">
            <h2 class="section-title">Sobre Nós</h2>
            <p>Fundada em 2020, a Barbearia Estilo & Corte traz o conceito de barbearia clássica com um toque moderno.</p>
            <p>Nosso objetivo é proporcionar não apenas um corte, mas uma experiência de relaxamento e estilo.</p>
        </div>
    </section>

    <section id="contato" class="contato">
        <div class="container">
            <h2 class="section-title">Agende seu Horário</h2>
            <p class="section-subtitle">Preencha o formulário abaixo e confirmaremos em breve</p>
            <form id="formAgendamento">
                <div class="form-group">
                    <label for="nome">Nome:</label>
                    <input type="text" id="nome" name="nome" required>
                </div>
                <div class="form-group">
                    <label for="telefone">Telefone:</label>
                    <input type="tel" id="telefone" name="telefone" required>
                </div>
                <div class="form-group">
                    <label for="servico">Serviço:</label>
                    <select id="servico" name="servico">
                        <option value="Corte de Cabelo">Corte de Cabelo</option>
                        <option value="Barba">Barba</option>
                        <option value="Combo">Combo (Cabelo + Barba)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="profissional">Profissional:</label>
                    <select id="profissional" name="profissional" required>
                        <option value="">Selecione um profissional...</option>
                    </select>
                </div>
                <div class="form-group-inline">
                    <div>
                        <label for="data">Data:</label>
                        <input type="date" id="data" name="data" required>
                    </div>
                    <div>
                        <label for="horario">Horário:</label>
                        <input type="time" id="horario" name="horario" required>
                    </div>
                </div>
                <button type="submit" class="btn btn-submit">Confirmar Agendamento</button>
            </form>
        </div>
    </section>

    <!-- Modal para Galeria -->
    <div id="imageModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="img01">
    </div>

    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h3>Estilo & Corte</h3>
                    <p>A melhor experiência em barbearia da cidade.</p>
                </div>
                <div class="footer-col">
                    <h3>Links Rápidos</h3>
                    <ul>
                        <li><a href="#home">Início</a></li>
                        <li><a href="#servicos">Serviços</a></li>
                        <li><a href="#contato">Agendamento</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>Contato</h3>
                    <p>Rua das Flores, 123</p>
                    <p>(11) 99999-9999</p>
                </div>
                <div class="footer-col newsletter">
                    <h3>Newsletter</h3>
                    <form action="/newsletter" method="POST">
                        <input type="email" placeholder="Seu e-mail" required>
                        <button type="submit">OK</button>
                    </form>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 Barbearia Estilo & Corte. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <script>
        // Carregar profissionais ao iniciar a página
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const response = await fetch('/api/profissionais');
                const result = await response.json();
                
                const selectProfissional = document.getElementById('profissional');
                const teamContainer = document.getElementById('team-container');
                
                // Limpar container de loading
                teamContainer.innerHTML = '';

                result.data.forEach(prof => {
                    // Adicionar ao Select do Formulário
                    const option = document.createElement('option');
                    option.value = prof.nome;
                    option.textContent = prof.nome;
                    selectProfissional.appendChild(option);

                    // Adicionar ao Grid da Equipe
                    const card = document.createElement('div');
                    card.className = 'team-card';
                    card.innerHTML = `
                        <div class="team-img" style="background-image: url('${prof.foto}')"></div>
                        <h3>${prof.nome}</h3>
                        <p>${prof.especialidade}</p>
                    `;
                    teamContainer.appendChild(card);
                });
            } catch (error) {
                console.error('Erro ao carregar profissionais:', error);
                document.getElementById('team-container').innerHTML = '<p>Erro ao carregar equipe.</p>';
            }
        });

        // Lógica do Acordeão (FAQ)
        const acc = document.getElementsByClassName("accordion-header");
        for (let i = 0; i < acc.length; i++) {
            acc[i].addEventListener("click", function() {
                this.classList.toggle("active");
                const panel = this.nextElementSibling;
                if (panel.style.maxHeight) {
                    panel.style.maxHeight = null;
                } else {
                    panel.style.maxHeight = panel.scrollHeight + "px";
                } 
            });
        }

        // Lógica do Modal de Imagem
        const modal = document.getElementById("imageModal");
        const modalImg = document.getElementById("img01");
        const galleryItems = document.querySelectorAll(".gallery-item img");
        const span = document.getElementsByClassName("close")[0];

        galleryItems.forEach(img => {
            img.addEventListener('click', function() {
                modal.style.display = "flex";
                modalImg.src = this.src;
            });
        });

        span.onclick = function() { 
            modal.style.display = "none";
        }
        window.onclick = function(event) {
            if (event.target == modal) { modal.style.display = "none"; }
        }

        document.getElementById('formAgendamento').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const data = Object.fromEntries(formData.entries());

            const response = await fetch('/agendar', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });

            const result = await response.json();
            alert(result.message || 'Erro ao agendar');
        });
    </script>
</body>

</html>

